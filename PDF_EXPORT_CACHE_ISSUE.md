# PDFエクスポートメニューが消える問題の原因と解決策

## 問題の症状

- 通常のリロード（F5）: 「PDFエクスポート」メニューが消える
- スーパーリロード（Ctrl+Shift+R / Cmd+Shift+R）: 「PDFエクスポート」メニューが表示される

## 原因

### 1. **Next.jsのFast Refresh（ホットリロード）の問題**

Next.jsの開発モードでは、Fast Refreshという機能により、コンポーネントの変更を自動的に反映します。しかし、以下の場合に問題が発生することがあります：

- **動的インポートのキャッシュ**: `exportToPDF`関数内で使用している動的インポート（`await import('@react-pdf/renderer')`）がブラウザのキャッシュに残っている
- **モジュール解決のタイミング**: モジュールの読み込み順序がキャッシュによって変わることがある
- **循環参照の可能性**: `pdfExporter.tsx`内で自分自身をインポートしている（`await import('./pdfExporter')`）

### 2. **ブラウザのキャッシュ**

通常のリロードでは、ブラウザがJavaScriptファイルをキャッシュから読み込むため、古いバージョンのコードが実行される可能性があります。

### 3. **Next.jsのビルドキャッシュ**

`.next`フォルダに保存されているビルドキャッシュが古い状態のままになっている可能性があります。

## 解決策

### 即座の解決策

1. **開発サーバーの再起動**
   ```bash
   # 開発サーバーを停止（Ctrl+C）
   # 再度起動
   npm run dev
   ```

2. **Next.jsのキャッシュをクリア**
   ```bash
   rm -rf .next
   npm run dev
   ```

3. **ブラウザのキャッシュをクリア**
   - スーパーリロード（Ctrl+Shift+R / Cmd+Shift+R）を使用
   - または、ブラウザの開発者ツールで「Disable cache」を有効化

### 根本的な解決策

動的インポートの循環参照を解消し、モジュールの読み込みを最適化する必要があります。

